/* Frappe Gantt Theme Integration */
/* Mapping Frappe's internal CSS variables to our Tailwind theme variables */

.frappe-gantt-wrapper {
    /* Define variables that Frappe Gantt uses, mapped to our theme */
    --g-header-background: hsl(var(--card)) !important;
    --g-row-color: hsl(var(--card)) !important;
    --g-row-border-color: hsl(var(--border)) !important;
    --g-border-color: hsl(var(--border)) !important;

    --g-text-dark: hsl(var(--foreground)) !important;
    --g-text-muted: hsl(var(--muted-foreground)) !important;
    --g-text-light: hsl(var(--primary-foreground)) !important;

    --g-actions-background: hsl(var(--secondary)) !important;
    --g-popup-actions: hsl(var(--popover)) !important;

    --g-ticket-color: hsl(var(--border) / 0.5) !important;
    --g-tick-color-thick: hsl(var(--border)) !important;

    /* Progress & Highlighting */
    --g-progress-color: hsl(var(--primary) / 0.5) !important;
    --g-today-highlight: hsl(var(--primary)) !important;
    --g-weekend-highlight-color: hsl(var(--muted) / 0.2) !important;

    --g-arrow-color: hsl(var(--foreground) / 0.5) !important;
}

/* Force container transparency to let background show if needed, or matched bg */
.frappe-gantt-wrapper .gantt-container {
    background-color: transparent !important;
    border-color: var(--g-border-color) !important;
}

/* Fix sticky header white background problem */
.frappe-gantt-wrapper .gantt-container .current-upper {
    background: hsl(var(--card)) !important;
    /* Match card background */
}

/* SVG Elements Overrides - Specificity Boost */
.frappe-gantt-wrapper .grid-header {
    background-color: var(--g-header-background) !important;
    fill: var(--g-header-background) !important;
    border-bottom: 1px solid var(--g-row-border-color) !important;
    stroke: var(--g-row-border-color) !important;
}

.frappe-gantt-wrapper .grid-row {
    fill: var(--g-row-color) !important;
}

.frappe-gantt-wrapper .grid-row:nth-child(even) {
    fill: hsl(var(--muted) / 0.3) !important;
}

/* Ensure empty/scrolling areas of the chart don't show white */
.frappe-gantt-wrapper .gantt {
    background-color: transparent !important;
}

/* Text Elements */
.frappe-gantt-wrapper text {
    fill: var(--g-text-dark) !important;
}

.frappe-gantt-wrapper .lower-text,
.frappe-gantt-wrapper .upper-text {
    fill: var(--g-text-muted) !important;
}

/* Current Date */
.frappe-gantt-wrapper .current-date-highlight {
    background: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
}

/* Task Bars */
.frappe-gantt-wrapper .bar-label {
    fill: hsl(var(--primary-foreground)) !important;
    font-size: 12px;
}

.frappe-gantt-wrapper .gantt-blue .bar,
.frappe-gantt-wrapper .gantt-blue-late .bar {
    fill: #3b82f6 !important;
}

.frappe-gantt-wrapper .gantt-red .bar,
.frappe-gantt-wrapper .gantt-red-late .bar {
    fill: hsl(var(--destructive)) !important;
}

.frappe-gantt-wrapper .gantt-green .bar,
.frappe-gantt-wrapper .gantt-green-late .bar {
    fill: #22c55e !important;
}

.frappe-gantt-wrapper .gantt-default .bar,
.frappe-gantt-wrapper .gantt-default-late .bar {
    fill: hsl(var(--muted-foreground)) !important;
}

/* Borders and Strokes */
.frappe-gantt-wrapper rect.bar {
    stroke: none;
}

.frappe-gantt-wrapper [class*="-late"] .bar {
    stroke: hsl(var(--destructive)) !important;
    stroke-width: 2px !important;
}

/* Popups */
.frappe-gantt-wrapper .popup-wrapper {
    background: hsl(var(--popover)) !important;
    color: hsl(var(--foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.frappe-gantt-wrapper .popup-wrapper .title {
    color: hsl(var(--foreground)) !important;
}

.frappe-gantt-wrapper .popup-wrapper .subtitle {
    color: hsl(var(--muted-foreground)) !important;
}