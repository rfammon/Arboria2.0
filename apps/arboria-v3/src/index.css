@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);

  /* Soft UI Depth Tokens */
  --shadow-color: rgba(0, 0, 0, 0.08);
  --shadow-soft: 0 10px 30px var(--shadow-color);
  --shadow-deep: 0 20px 50px var(--shadow-color);
  --glass-blur: 12px;
}

/* Adaptive Density Tokens */
:root[data-density='field'] {
  --spacing-unit: 24px;
  --input-height: 56px;
  --font-size-lg: 20px;
  --font-size-md: 18px;
  --touch-target: 56px;
  --border-radius-lg: 24px;
  --border-radius-md: 16px;
  --icon-size: 28px;
  --blade-width: 100vw;

  /* New Typography Tokens - Large/Touchable */
  --text-h1: 32px;
  --text-h2: 28px;
  --text-h3: 24px;
  --text-h4: 20px;
  --text-body: 18px;
  --text-caption: 14px;

  /* Interaction Scale */
  --scale-hover: 1.02;
  --scale-active: 0.98;
}

:root[data-density='office'] {
  --spacing-unit: 16px;
  --input-height: 44px;
  --font-size-lg: 18px;
  --font-size-md: 16px;
  --touch-target: 44px;
  --border-radius-lg: 12px;
  --border-radius-md: 8px;
  --icon-size: 20px;
  --blade-width: 400px;

  /* New Typography Tokens - Compact/Information Dense */
  --text-h1: 24px;
  --text-h2: 20px;
  --text-h3: 18px;
  --text-h4: 16px;
  --text-body: 14px;
  --text-caption: 12px;

  /* Interaction Scale - Subtler on desktop */
  --scale-hover: 1.01;
  --scale-active: 0.99;
}

html,
body,
#root {
  height: 100%;
  width: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* Arboria Blue Primary */
    --primary: 210 100% 40%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 210 100% 40%;

    --radius: 1rem;
    --glass-background: rgba(255, 255, 255, 0.7);
  }

  .dark {
    --background: 222.2 47% 6%;
    /* Deep dark blue-black */
    --foreground: 210 40% 98%;

    --card: 222.2 47% 9%;
    /* Slightly lighter for depth */
    --card-foreground: 210 40% 98%;

    --popover: 222.2 47% 9%;
    --popover-foreground: 210 40% 98%;

    /* Arboria Blue Dark - More vibrant for contrast */
    --primary: 210 100% 60%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217.2 32.6% 14%;
    /* Darker secondary */
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 14%;
    --muted-foreground: 217.2 20% 70%;
    /* Brighter muted text */

    --accent: 217.2 32.6% 20%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17%;
    --input: 217.2 32.6% 12%;
    /* Recessed darken inputs */
    --ring: 210 100% 50%;

    --glass-background: rgba(15, 23, 42, 0.8);
    --shadow-color: rgba(255, 255, 255, 0.05);
  }

  .forest {
    --background: 140 15% 92%;
    /* Desaturated, slightly darker green-grey base */
    --foreground: 140 60% 10%;

    --card: 140 20% 98%;
    /* Lighter than background, off-white hint of green */
    --card-foreground: 140 60% 10%;

    --popover: 140 20% 98%;
    --popover-foreground: 140 60% 10%;

    /* Forest Green Primary - slightly deeper */
    --primary: 142 70% 30%;
    --primary-foreground: 0 0% 100%;

    --secondary: 140 15% 85%;
    /* Distinct from background */
    --secondary-foreground: 140 60% 10%;

    --muted: 140 15% 85%;
    --muted-foreground: 140 30% 40%;

    --accent: 140 20% 88%;
    --accent-foreground: 140 60% 10%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 140 20% 80%;
    /* Visible borders */
    --input: 140 20% 80%;
    --ring: 142 70% 30%;

    --radius: 0.5rem;
    --shadow-color: rgba(20, 40, 20, 0.08);
  }

  .dark-forest {
    --background: 156 42% 4%;
    --foreground: 146 30% 94%;
    /* Brighter text */

    --card: 156 30% 8%;
    /* Slightly lighter for depth */
    --card-foreground: 146 30% 94%;

    --popover: 156 30% 8%;
    --popover-foreground: 146 30% 94%;

    /* Forest Green Primary - Brighter to pop against dark bg */
    --primary: 142 60% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 156 25% 12%;
    --secondary-foreground: 146 30% 94%;

    --muted: 156 25% 12%;
    --muted-foreground: 156 15% 70%;
    /* Brighter muted text */

    --accent: 156 25% 18%;
    --accent-foreground: 146 30% 94%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 100%;

    --border: 156 25% 15%;
    --input: 156 25% 10%;
    /* Recessed darken inputs */
    --ring: 142 60% 45%;

    --radius: 1rem;
    --shadow-color: rgba(255, 255, 255, 0.03);
  }

  .neon-dark {
    --background: 260 12% 5%;
    /* Deeper, more neutral dark purple background */
    --foreground: 0 0% 95%;
    /* Nearly white for maximum readability */

    --card: 260 12% 8%;
    --card-foreground: 0 0% 95%;

    --popover: 260 15% 3%;
    --popover-foreground: 0 0% 95%;

    /* Neon Purple Primary */
    --primary: 270 95% 65%;
    /* Vibrant neon purple with better saturation */
    --primary-foreground: 0 0% 100%;
    /* White text on primary for contrast */

    --secondary: 260 10% 18%;
    --secondary-foreground: 0 0% 90%;

    --muted: 260 8% 15%;
    --muted-foreground: 0 0% 70%;
    /* More contrasted muted text */

    --accent: 260 10% 18%;
    --accent-foreground: 0 0% 90%;

    --destructive: 0 80% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 260 10% 20%;
    --input: 260 10% 12%;
    --ring: 270 85% 60%;
    /* Matches primary for consistency */

    --radius: 0.5rem;
    --shadow-color: rgba(255, 255, 255, 0.05);
  }

  .gruvbox-soft-dark {
    --background: 23 12% 14%;
    /* Slightly darker for deeper blacks */
    --foreground: 40 20% 94%;
    /* Brighter text */

    --card: 23 12% 18%;
    /* Distinct depth */
    --card-foreground: 40 20% 94%;

    --popover: 23 12% 18%;
    --popover-foreground: 40 20% 94%;

    /* Gruvbox Blue Primary - Vibrant pop */
    --primary: 194 65% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 23 10% 20%;
    --secondary-foreground: 40 20% 90%;

    --muted: 23 10% 20%;
    --muted-foreground: 37 14% 75%;
    /* Brighter text */

    --accent: 23 10% 28%;
    --accent-foreground: 40 20% 94%;

    --destructive: 7 85% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 23 10% 25%;
    --input: 23 10% 16%;
    /* Recessed darken inputs */
    --ring: 194 65% 55%;

    --radius: 1rem;
    --shadow-color: rgba(255, 255, 255, 0.05);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  h1 {
    font-size: var(--text-h1);
    font-weight: 700;
    letter-spacing: -0.025em;
    line-height: 1.2;
    @apply scroll-m-20;
  }

  h2 {
    font-size: var(--text-h2);
    font-weight: 600;
    letter-spacing: -0.025em;
    line-height: 1.3;
    @apply scroll-m-20;
  }

  h3 {
    font-size: var(--text-h3);
    font-weight: 600;
    letter-spacing: -0.025em;
    line-height: 1.4;
    @apply scroll-m-20;
  }

  h4 {
    font-size: var(--text-h4);
    font-weight: 500;
    letter-spacing: -0.025em;
    line-height: 1.5;
    @apply scroll-m-20;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-size: var(--text-body);
    line-height: 1.6;
  }

  p {
    font-size: var(--text-body);
    line-height: 1.6;
  }

  small,
  .text-caption {
    font-size: var(--text-caption);
    line-height: 1.4;
  }

  .glass-card {
    @apply backdrop-blur-[var(--glass-blur)] bg-[var(--glass-background)] border-white/20 shadow-[var(--shadow-soft)];
  }

  .soft-shadow {
    @apply shadow-[var(--shadow-soft)];
  }

  .deep-shadow {
    @apply shadow-[var(--shadow-deep)];
  }
}

@layer utilities {
  /* Standard Focus Ring */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background transition-shadow duration-200;
  }

  /* Interactive Card / Element */
  /* Uses density-aware scale variables defined above */
  .interactive-hover {
    @apply cursor-pointer transition-all duration-300 ease-out;
  }

  .interactive-hover:hover {
    transform: scale(var(--scale-hover));
    @apply shadow-lg ring-1 ring-primary/20;
  }

  .interactive-hover:active {
    transform: scale(var(--scale-active));
    @apply shadow-sm opacity-90;
  }

  /* Level 1: Subtle (overlays, toasts) */
  .glass-subtle {
    @apply backdrop-blur-sm bg-background/40 border border-foreground/5 shadow-sm;
  }

  /* Level 2: Default (cards, sidebars) */
  .glass-default {
    @apply backdrop-blur-md bg-background/70 border border-foreground/10 shadow-md;
  }

  /* Level 3: Heavy (modals, emphasis) */
  .glass-heavy {
    @apply backdrop-blur-xl bg-background/90 border border-foreground/15 shadow-xl;
  }

  /* Gradient Glass (Optional Polish) */
  .glass-gradient {
    background: linear-gradient(
      135deg,
      hsl(var(--background) / 0.7) 0%,
      hsl(var(--background) / 0.4) 100%
    );
    @apply backdrop-blur-md border border-white/20;
  }
}

/* Educational content: fixed dark text on light backgrounds, regardless of theme */
.educational-content :where(p, h1, h2, h3, h4, h5, h6, li, td, th, span, div, a:not(.no-educational-override), blockquote, code:not(pre code)) {
  @apply text-gray-900 dark:text-gray-900 !important;
}

.educational-content {
  @apply bg-white dark:bg-white !important;
  color: #111 !important;
}

/* Specific overrides for different text elements in educational content */
.educational-content h1,
.educational-content h2,
.educational-content h3 {
  @apply text-gray-900 dark:text-gray-900 !important;
}

.educational-content p,
.educational-content li,
.educational-content td,
.educational-content th {
  @apply text-gray-800 dark:text-gray-800 !important;
}

.educational-content blockquote {
  @apply text-gray-700 dark:text-gray-700 !important;
}

.educational-content a {
  @apply text-blue-600 dark:text-blue-600 !important;
}

.educational-content code {
  @apply text-gray-800 dark:text-gray-800 !important;
  background-color: #f3f4f6 !important;
}

.educational-content pre code {
  @apply text-gray-100 !important;
  background-color: initial !important;
}

.educational-content table th,
.educational-content table td {
  @apply border-gray-300 !important;
}

/* Safe Area Utilities - for devices with notches/home indicators */
.safe-area-pb {
  padding-bottom: max(1rem, env(safe-area-inset-bottom, 0px));
}
  .madeira {
    /* Soft Oak - Light wood theme, less dark and smoother */
    --background: 35 40% 94%;
    --foreground: 25 30% 20%;

    --card: 35 35% 91%;
    --card-foreground: 25 30% 20%;

    --popover: 35 35% 91%;
    --popover-foreground: 25 30% 20%;

    /* Rich Oak Primary */
    --primary: 32 65% 38%;
    --primary-foreground: 35 40% 98%;

    --secondary: 35 25% 86%;
    --secondary-foreground: 25 30% 20%;

    --muted: 35 25% 86%;
    --muted-foreground: 25 15% 45%;

    --accent: 35 30% 82%;
    --accent-foreground: 25 30% 20%;

    --destructive: 0 70% 50%;
    --destructive-foreground: 35 40% 98%;

    --border: 35 20% 80%;
    --input: 35 20% 85%;
    --ring: 32 65% 38%;

    --radius: 1rem;
    --shadow-color: rgba(66, 53, 43, 0.1);
  }
